{% extends "base.html" %}
{% block content %}
<div class="container-fluid">
  <div class="row mb-3">
    <div class="col-md-8"><h3><i class="fas fa-users"></i> Daftar Siswa</h3></div>
    <div class="col-md-4 text-right"><a href="{{ url_for('siswa_tambah') }}" class="btn btn-primary"><i class="fas fa-user-plus"></i> Tambah Siswa</a></div>
  </div>

  <form method="GET" action="{{ url_for('cari_siswa') }}" class="mb-3">
    <div class="input-group">
      <input type="text" name="keyword" class="form-control" placeholder="Cari nama, kelas, jurusan..." value="{{ keyword if keyword else '' }}">
      <div class="input-group-append"><button class="btn btn-secondary" type="submit"><i class="fas fa-search"></i></button></div>
    </div>
  </form>

  <div class="card shadow-sm">
    <div class="card-body p-0">
      <table class="table table-striped table-bordered mb-0">
        <thead class="thead-dark">
          <tr><th style="width:100px;">Foto</th><th>Nama</th><th>Kelas</th><th>Jurusan</th><th>Alamat</th><th style="width:140px;">Aksi</th></tr>
        </thead>
        <tbody>
          {% for s in siswa %}
          <tr>
            <td>
              {% if s.foto and ( 'uploads_siswa/' ~ s.foto ) %}
              <img src="{{ url_for('static', filename='uploads_siswa/' ~ s.foto) }}"
                class="img-thumbnail"
                style="width:60px; height:60px; object-fit:cover;">
                {% else %}
              <img src="{{ url_for('static', filename='noimage.png') }}"
              class="img-thumbnail"
                style="width:60px; height:60px; object-fit:cover;">
              {% endif %}

            </td>
            <td>{{ s.nama }}</td>
            <td>{{ s.kelas }}</td>
            <td>{{ s.jurusan }}</td>
            <td>{{ s.alamat }}</td>
            <td>
              <a href="{{ url_for('siswa_edit', id=s.id) }}" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
              <a href="{{ url_for('siswa_hapus', id=s.id) }}" class="btn btn-sm btn-danger" onclick="return confirm('Hapus siswa ini?')"><i class="fas fa-trash"></i></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
